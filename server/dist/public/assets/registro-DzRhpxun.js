import{u as A,r as w,g as _,h as B,j as e,J as D,K as $,M as z,a as L,b as q,d as M,f as O,e as U,o as X,B as j,y as G,z as d,N as H,p as l,q as c,s as o,t,I as h,w as x,O as v,P as f,Q as N,R as y,V as i,W as J,X as K,Y as Q,Z as W,_ as Y,C as Z,D as ee,A as se,G as re,H as S}from"./index-Bdt7aQY8.js";const ne=G({storeName:d().min(3,"El nombre debe tener al menos 3 caracteres"),businessType:d({required_error:"Selecciona un tipo de negocio"}),address:d().min(5,"La dirección debe tener al menos 5 caracteres"),city:d().min(2,"La ciudad es requerida"),phone:d().min(8,"El teléfono debe tener al menos 8 dígitos"),email:d().email("Correo electrónico inválido"),ownerName:d().min(3,"El nombre debe tener al menos 3 caracteres"),ownerRut:d().min(8,"RUT inválido"),ownerPhone:d().min(8,"El teléfono debe tener al menos 8 dígitos"),bankName:d().optional(),accountType:d().optional(),accountNumber:d().optional(),termsAccepted:H().refine(C=>C===!0,{message:"Debes aceptar los términos y condiciones"})});function ie(){const[C,b]=A(),[r,p]=w.useState(1),[g,P]=w.useState(null),n=_({resolver:se(ne),defaultValues:{storeName:"",businessType:"",address:"",city:"",phone:"",email:"",ownerName:"",ownerRut:"",ownerPhone:"",bankName:"",accountType:"",accountNumber:"",termsAccepted:!1}}),a=B({mutationFn:async s=>{const u=await re("POST","/api/vecinos/register",s);if(!u.ok){const m=await u.json();throw new Error(m.message||"Error al registrar el negocio")}return await u.json()},onSuccess:s=>{P(n.getValues()),p(4),S({title:"Registro exitoso",description:"Tu solicitud ha sido recibida y está siendo procesada."})},onError:s=>{S({title:"Error en el registro",description:s.message,variant:"destructive"})}}),E=s=>{a.mutate(s)},T=()=>{if(r===1){const s=["storeName","businessType","address","city","phone","email"];if(!s.every(m=>n.getFieldState(m).invalid===!1)){s.forEach(m=>n.trigger(m));return}}else if(r===2){const s=["ownerName","ownerRut","ownerPhone"];if(!s.every(m=>n.getFieldState(m).invalid===!1)){s.forEach(m=>n.trigger(m));return}}p(s=>s+1)},k=()=>{p(s=>s-1)},V=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{control:n.control,name:"storeName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Nombre del negocio"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Ej. Almacén Don Pedro",...s,disabled:a.isPending})}),e.jsx(x,{})]})}),e.jsx(l,{control:n.control,name:"businessType",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Tipo de negocio"}),e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value,disabled:a.isPending,children:[e.jsx(t,{children:e.jsx(f,{children:e.jsx(N,{placeholder:"Selecciona el tipo de negocio"})})}),e.jsxs(y,{children:[e.jsx(i,{value:"almacen",children:"Almacén"}),e.jsx(i,{value:"farmacia",children:"Farmacia"}),e.jsx(i,{value:"cibercafe",children:"Cibercafé"}),e.jsx(i,{value:"botilleria",children:"Botillería"}),e.jsx(i,{value:"libreria",children:"Librería"}),e.jsx(i,{value:"otros",children:"Otros"})]})]}),e.jsx(x,{})]})}),e.jsx(l,{control:n.control,name:"address",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Dirección"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Ej. Av. Principal 123",...s,disabled:a.isPending})}),e.jsx(x,{})]})}),e.jsx(l,{control:n.control,name:"city",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Ciudad"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Ej. Santiago",...s,disabled:a.isPending})}),e.jsx(x,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{control:n.control,name:"phone",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Teléfono"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Ej. 912345678",...s,disabled:a.isPending})}),e.jsx(x,{})]})}),e.jsx(l,{control:n.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Correo electrónico"}),e.jsx(t,{children:e.jsx(h,{placeholder:"ejemplo@correo.com",...s,disabled:a.isPending})}),e.jsx(x,{})]})})]})]}),R=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{control:n.control,name:"ownerName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Nombre completo del propietario"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Ej. Juan Pérez González",...s,disabled:a.isPending})}),e.jsx(x,{})]})}),e.jsx(l,{control:n.control,name:"ownerRut",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"RUT del propietario"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Ej. 12345678-9",...s,disabled:a.isPending})}),e.jsx(x,{})]})}),e.jsx(l,{control:n.control,name:"ownerPhone",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Teléfono del propietario"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Ej. 912345678",...s,disabled:a.isPending})}),e.jsx(x,{})]})})]}),F=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Información bancaria (opcional)"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Esta información se utilizará para realizar transferencias de tus comisiones."})]}),e.jsx(l,{control:n.control,name:"bankName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Banco"}),e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value||"",disabled:a.isPending,children:[e.jsx(t,{children:e.jsx(f,{children:e.jsx(N,{placeholder:"Selecciona tu banco"})})}),e.jsxs(y,{children:[e.jsx(i,{value:"banco_estado",children:"Banco Estado"}),e.jsx(i,{value:"banco_santander",children:"Banco Santander"}),e.jsx(i,{value:"banco_chile",children:"Banco de Chile"}),e.jsx(i,{value:"banco_bci",children:"Banco BCI"}),e.jsx(i,{value:"banco_scotiabank",children:"Scotiabank"}),e.jsx(i,{value:"otro",children:"Otro"})]})]}),e.jsx(J,{children:"Puedes agregar esta información más tarde"})]})}),e.jsx(l,{control:n.control,name:"accountType",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Tipo de cuenta"}),e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value||"",disabled:a.isPending,children:[e.jsx(t,{children:e.jsx(f,{children:e.jsx(N,{placeholder:"Selecciona el tipo de cuenta"})})}),e.jsxs(y,{children:[e.jsx(i,{value:"cuenta_corriente",children:"Cuenta Corriente"}),e.jsx(i,{value:"cuenta_vista",children:"Cuenta Vista / RUT"}),e.jsx(i,{value:"cuenta_ahorro",children:"Cuenta de Ahorro"})]})]})]})}),e.jsx(l,{control:n.control,name:"accountNumber",render:({field:s})=>e.jsxs(c,{children:[e.jsx(o,{children:"Número de cuenta"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Ingresa el número de cuenta",...s,disabled:a.isPending})})]})}),e.jsx(K,{className:"my-6"}),e.jsx(l,{control:n.control,name:"termsAccepted",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(t,{children:e.jsx(Q,{checked:s.value,onCheckedChange:s.onChange,disabled:a.isPending})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsxs(o,{children:["Acepto los ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"términos y condiciones"})," y la ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"política de privacidad"})]}),e.jsx(x,{})]})]})})]}),I=()=>e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(W,{className:"h-20 w-20 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"¡Solicitud enviada con éxito!"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gracias por registrarte como socio de Vecinos Xpress."})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg text-left",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Próximos pasos:"}),e.jsxs("ol",{className:"space-y-2 list-decimal list-inside",children:[e.jsxs("li",{children:["Recibirás un correo de confirmación a ",e.jsx("span",{className:"font-semibold",children:g==null?void 0:g.email})]}),e.jsx("li",{children:"Nuestro equipo validará tu información en un plazo de 24-48 horas"}),e.jsx("li",{children:"Recibirás tus credenciales de acceso al sistema"}),e.jsx("li",{children:"Podrás descargar la aplicación de Vecinos Xpress e iniciar sesión"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-6",children:[e.jsxs(j,{onClick:()=>b("/vecinos"),variant:"outline",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Volver al inicio"]}),e.jsxs(j,{onClick:()=>b("/vecinos/login"),className:"bg-blue-600 hover:bg-blue-700",children:["Ir al login",e.jsx(Z,{className:"h-4 w-4 ml-2"})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs(j,{variant:"link",onClick:()=>b("/partners/descargar-apk"),className:"text-blue-600",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Descargar aplicación móvil"]})})]})]});return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-3xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold mr-2",children:"Vecinos Xpress"}),e.jsx("span",{className:"text-xs bg-blue-600 text-white px-1 py-0.5 rounded-sm",children:"by NotaryPro"})]}),e.jsx("p",{className:"text-gray-600",children:"Registro de nuevo socio"})]}),r<4&&e.jsxs("div",{className:"flex justify-between items-center mb-8 px-2",children:[e.jsxs("div",{className:`flex items-center ${r>=1?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center border-2 ${r>=1?"border-blue-600 bg-blue-50":"border-gray-300"}`,children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx("span",{className:"ml-2 text-sm font-medium hidden sm:block",children:"Negocio"})]}),e.jsx("div",{className:`flex-grow border-t mx-2 ${r>=2?"border-blue-600":"border-gray-300"}`}),e.jsxs("div",{className:`flex items-center ${r>=2?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center border-2 ${r>=2?"border-blue-600 bg-blue-50":"border-gray-300"}`,children:e.jsx($,{className:"h-4 w-4"})}),e.jsx("span",{className:"ml-2 text-sm font-medium hidden sm:block",children:"Propietario"})]}),e.jsx("div",{className:`flex-grow border-t mx-2 ${r>=3?"border-blue-600":"border-gray-300"}`}),e.jsxs("div",{className:`flex items-center ${r>=3?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center border-2 ${r>=3?"border-blue-600 bg-blue-50":"border-gray-300"}`,children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("span",{className:"ml-2 text-sm font-medium hidden sm:block",children:"Pagos"})]})]}),e.jsxs(L,{className:"shadow-lg",children:[e.jsxs(q,{children:[e.jsxs(M,{children:[r===1&&"Información del negocio",r===2&&"Información del propietario",r===3&&"Información de pagos",r===4&&"Registro completo"]}),e.jsxs(O,{children:[r===1&&"Ingresa los datos de tu negocio",r===2&&"Ingresa los datos del propietario del negocio",r===3&&"Configura cómo quieres recibir tus comisiones",r===4&&"Tu solicitud ha sido recibida"]})]}),e.jsx(U,{children:e.jsx(X,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(E),className:"space-y-4",children:[r===1&&V(),r===2&&R(),r===3&&F(),r===4&&I(),r<4&&e.jsxs("div",{className:"flex justify-between mt-8",children:[r>1?e.jsx(j,{type:"button",variant:"outline",onClick:k,disabled:a.isPending,children:"Anterior"}):e.jsx(j,{type:"button",variant:"outline",onClick:()=>b("/vecinos"),disabled:a.isPending,children:"Cancelar"}),r<3?e.jsx(j,{type:"button",className:"bg-blue-600 hover:bg-blue-700",onClick:T,disabled:a.isPending,children:"Siguiente"}):e.jsx(j,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:a.isPending,children:a.isPending?"Enviando...":"Enviar solicitud"})]})]})})})]}),r<4&&e.jsx("div",{className:"mt-8 text-center text-gray-600 text-sm",children:e.jsxs("p",{children:["¿Tienes dudas? ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Contáctanos"})]})})]})})}export{ie as default};
