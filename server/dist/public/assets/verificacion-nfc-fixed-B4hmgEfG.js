import{c as me,r as t,j as e,l as k,B as d,am as $,ap as ee,bp as T,aG as fe,u as ue,bq as xe,a as ve,b as je,d as he,f as Ae,e as Ne,bf as ge,T as pe,i as Ce,k as I,M as U,K as J,n as z,al as q,br as be,ao as _,bs as we,b8 as R,x as Pe,bt as ye,a0 as Fe}from"./index-Bdt7aQY8.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=me("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),He=({onSuccess:l,onError:o,demoMode:v=!1})=>{const[P,c]=t.useState("idle"),[p,r]=t.useState("Presione el botón para iniciar la lectura"),A=async()=>{c("reading"),r("Simulando lectura NFC...");try{await new Promise(m=>setTimeout(m,2e3));const s={documentType:"CI-CHL",documentNumber:"16.782.453-K",names:"MARÍA ALEJANDRA",surnames:"GONZÁLEZ FUENTES",nationality:"CHL",birthDate:"1988-04-22",gender:"F",issueDate:"2019-08-15",expiryDate:"2029-08-15",personalNumber:"16782453K",chipId:"CLHSMF7285631A44",faceImage:!0,fingerprints:!0,success:!0};c("success"),r("Lectura NFC completada con éxito"),l(s)}catch{c("error"),r("Error en la simulación NFC"),o("Error en la simulación de lectura NFC")}},y=async()=>{if(v){A();return}c("reading"),r("Acerque su documento de identidad al dispositivo...");try{if("NDEFReader"in window)H();else if("nfc"in navigator&&"reading"in navigator.nfc)C();else if("NfcAdapter"in window)L();else if(window.androidInterface&&window.androidInterface.readNFC)b();else throw new Error("No se encontró una API NFC compatible")}catch{v?A():(c("error"),r("No se pudo acceder a la funcionalidad NFC"),o("Este dispositivo no soporta NFC o no se pudo acceder a la funcionalidad"))}},H=async()=>{try{const{readWithWebNFC:s}=await T(async()=>{const{readWithWebNFC:f}=await import("./nfc-real-D1_N-wTl.js");return{readWithWebNFC:f}},[]);r("Acerque su documento al dispositivo...");const m=await s();c("success"),r("Lectura NFC completada con éxito"),l(m)}catch(s){v?A():(c("error"),r(`Error al iniciar el escaneo NFC: ${s.message}`),o(`Error al iniciar el escaneo NFC: ${s.message}`))}},C=async()=>{try{const{readWithAlternativeNFC:s}=await T(async()=>{const{readWithAlternativeNFC:f}=await import("./nfc-real-D1_N-wTl.js");return{readWithAlternativeNFC:f}},[]);r("Acerque su documento al dispositivo...");const m=await s();c("success"),r("Lectura NFC completada con éxito"),l(m)}catch(s){v?A():(c("error"),r(`API NFC alternativa: ${s.message}`),o(`API NFC alternativa: ${s.message}`))}},L=async()=>{try{r("Acerque su documento al dispositivo NFC...");const{readWithWebNFC:s}=await T(async()=>{const{readWithWebNFC:f}=await import("./nfc-real-D1_N-wTl.js");return{readWithWebNFC:f}},[]),m=await s();c("success"),r("Lectura NFC completada con éxito"),l(m)}catch(s){v?A():(c("error"),r(`Error en API Android: ${s.message}`),o(`Error en API Android: ${s.message}`))}},b=async()=>{try{const{readWithAndroidInterface:s}=await T(async()=>{const{readWithAndroidInterface:f}=await import("./nfc-real-D1_N-wTl.js");return{readWithAndroidInterface:f}},[]);r("Acerque su documento al dispositivo...");const m=await s();c("success"),r("Lectura NFC completada con éxito"),l(m)}catch(s){v?A():(c("error"),r(`Error en interfaz Android: ${s.message}`),o(`Error en interfaz Android: ${s.message}`))}},K=()=>{switch(P){case"reading":return e.jsxs("div",{className:"text-center py-6",children:[e.jsxs("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:[e.jsx("div",{className:"animate-ping absolute w-10 h-10 rounded-full bg-blue-400 opacity-75"}),e.jsx(k,{className:"w-8 h-8 text-blue-600 relative"})]}),e.jsx("p",{className:"font-medium text-blue-700 mb-2",children:"Leyendo chip NFC"}),e.jsx("p",{className:"text-sm text-gray-600",children:p})]});case"success":return e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ee,{className:"w-8 h-8 text-green-600"})}),e.jsx("p",{className:"font-medium text-green-700 mb-2",children:"¡Lectura exitosa!"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Información del documento obtenida correctamente"})]});case"error":return e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx($,{className:"w-8 h-8 text-red-600"})}),e.jsx("p",{className:"font-medium text-red-700 mb-2",children:"Error de lectura"}),e.jsx("p",{className:"text-sm text-gray-600",children:p}),e.jsx(d,{variant:"outline",className:"mt-4",onClick:()=>{v?A():(c("idle"),r("Presione el botón para iniciar la lectura"))},children:v?"Simular lectura NFC":"Intentar nuevamente"})]});default:return e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"w-8 h-8 text-[#2d219b]"})}),e.jsx("p",{className:"font-medium text-[#2d219b] mb-2",children:"Lector NFC"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:p}),e.jsx(d,{onClick:y,className:"bg-[#2d219b] hover:bg-[#221a7c]",children:v?"Iniciar lectura (Demo)":"Iniciar lectura NFC"})]})}};return e.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:K()})},Ve=()=>{const{toast:l}=fe(),[o,v]=ue(),P=new URLSearchParams(o.split("?")[1]||""),c=P.get("session"),p=P.get("demo")==="true",r=P.get("code"),[A,y]=t.useState("nfc"),[H,C]=t.useState(null),[L,b]=t.useState(null),[K,s]=t.useState(null),[m,f]=t.useState(null),[ae,se]=t.useState(null);t.useState(null);const[te,Le]=t.useState(c),[O,B]=t.useState(!1),[W,re]=t.useState("documento"),N=t.useRef(null),D=t.useRef(null),V=t.useRef(null),j=t.useRef(null),[M,ie]=t.useState(!1),[u,w]=t.useState(!1),[Y,X]=t.useState(null),[Q,g]=t.useState(0),[ne,F]=t.useState(null);t.useEffect(()=>(ce(),()=>{j.current&&j.current.getTracks().forEach(a=>a.stop())}),[]);const ce=()=>{"NDEFReader"in window?(F(!0),console.log("NFC API (NDEFReader) está disponible")):"nfc"in navigator&&"reading"in navigator.nfc?(F(!0),console.log("NFC API alternativa está disponible")):"NfcAdapter"in window?(F(!0),console.log("NFC API Android (NfcAdapter) está disponible")):window.androidInterface&&window.androidInterface.readNFC?(F(!0),console.log("Android NFC Interface está disponible")):(F(!1),console.log("NFC API no está disponible en este dispositivo/navegador"))},G=a=>{se(a),g(33),l({title:"Lectura NFC exitosa",description:"La información de su documento ha sido leída correctamente"}),setTimeout(()=>{y("documento")},1e3)},E=async a=>{try{re(a),j.current&&j.current.getTracks().forEach(i=>i.stop());const n={video:{facingMode:a==="selfie"?"user":"environment",width:{ideal:1280},height:{ideal:720}}};console.log(`Intentando acceder a cámara con modo: ${a==="selfie"?"user":"environment"}`);try{const i=await navigator.mediaDevices.getUserMedia(n);j.current=i}catch(i){console.warn("Error con configuración inicial de cámara, intentando con opciones reducidas:",i);const h={video:!0},x=await navigator.mediaDevices.getUserMedia(h);j.current=x,l({title:"Cámara en modo básico",description:"Usando configuración básica de cámara. La calidad podría ser menor."})}N.current&&j.current&&(N.current.srcObject=j.current,N.current.onloadedmetadata=()=>{N.current&&N.current.play().catch(i=>console.error("Error reproduciendo video:",i))}),B(!0)}catch(n){if(console.error("Error al acceder a la cámara:",n),p){if(l({title:"Modo Demo - Simulando cámara",description:"En modo demo, puede continuar sin necesidad de cámara real."}),a==="documento"){const i="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/wAALCAB4AKABAREALwD/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/2gAIAQEAAD8A9/8Aijplnc+KfC8r21m8cdxeECaJQfmd/rXommeCtC+yRu9hpP7xQ3FpF2/CvN/iJ4Pmu/2iItEsrGadnFu7LHAxA+Vj2FfQ2n6Dp9jpNrCllZgJCqj93H0wPavDfGvwr8TeKf2hdIuNO0+WSxhELO4hbA3EnvX0na+CtEjs4lOn2AKov/LCP0+leKePPhzrvjj4wQtHYs9ppswdcRN95k/iP0r6I0bRLPTtLtovsVkD5Sj/AFEf9K8V1z4Z+NbT4sS+GZvDGsLbzGVZA9o5UYQkdK9q0TwhpVp4btEa0sg/kKT+4j7Y+lR3Hw58O3AYSafYkEY/1EfavOPGfw71vxl4ssrODTpCltdfvD5LdCV7V7hZ+GtMs7G3jFrZjZGFH7iP09q8j8afB/XvFnxD0/UbXTJJrCC4iecJC3C5/ir6J0/QNPttMt4zZ2YKxKD+4j9B7V5N43+GniTxp8VtN1O10+V9Pt3txK4hbgBgTX0Paeenl/uugx096+ePip8PPHXj/wCKlnNBotyNPt4oI5VMDfKQCT1+tfRVlZ3K2UO/AzGO1eb+MfAPibxb440y8g0+T7BZXSSTN5DfeO7gd6+gLCxuVs4d+BmMdjXnPi/4feJ/Gviy01G30+T+z7SUOHMDfMfmHQV9B2VncLZw78jEY7GvN/GHw+8T+NfFtpqNvp8n9n2kocu0DfMfmHQV9B2FncLZw78jEY7GvKfHfgfxV468ZWU8Gnyi0s3iSRjA37zJPH619CWNncLZQ78jEY7GvJPFvw08XeLfiLaandafK9nA9uolMDYO0MTX0JYWdytlDvwMxjsa808X/D3XPG3jCyvoLOT7BZTIzOYW5YAnGfavfbCzuVsod+BiMdjXnHiz4d67428Y2V9BZyfYLKZGZzC3LAE4z7V77YWdytlDvwMxjsa858WfDvXfG3jGyvoLOT7BZTIzOYW5YAnGfavfbCzuVsod+BiMdjXnHiz4d67428Y2V9BZyfYLKZGZzC3LAE4z7V77YWdwVOMLjHpXj79Vx3Paub8P/wDI2+Iv+vtv616PY9R9K+fP7RHk/wAVfX1j1H0rxzx8M+PPCnH/AC9N/wCgGvY7Lqfwr56/tEeTX19Y9R9K8c8fDHjzwn/183/oBr2Oy6n8K+ebm8bZyfXtXp/hPxv4j074YeH5dK1g2aXMjrJ50AbIOCMZPXFfOOv+OfGkXirWUj8QGNEmYKv2dOAa9c8OeNfF974D8Jv/AGx9+5yv+jR9PLX39K858ceM/GUXjHWETxBtRJiFH2dO3t+Feu+Gb3U5PAHhB5NR81p5FLt9mTk+Wvt6V5t48vdVi8Za8qak0ShzhfIToB7V6r4PvL+b4f8AhZn1JpGaHJYwpyecV5n9svF8M89f7MzXV/D2+vjpMnmau8g81uPs6cDA9q+e/wC0R5P8VfX1j1H0rxzx8M+PPCnH/L03/oBr2Oy6n8K+ev7RHk19fWPUfSvHPHwz488Kcf8AL03/AKAa9jsup/CvnuzFZ/LGcdfSuh+HkWr2PgHw6t/qDpM8sgdFlVyP3ajqK+e/7RHk/wAVfX1j1H0rxzx8M+PPCnH/AC9N/wCgGvY7Lqfwr56/tEeT/FX19Y9R9K8c8fDPjzwpxz9qb/0A17HZdT+FfPdmqsZeR1xWl8PzfWfgPw+NQc+bPLJnChdvyJj9K+fP7RHk/wAVfX1j1H0rxzx8M+PPCnH/AC9N/wCgGvY7Lqfwr56/tEeT/FX19Y9R9K8c8fDPjzwpx/y9N/6Aa9jsup/Cvnr+0R5P8VfX1j1H0rxzx8M+PPCnH/L03/oBr2Oy6n8K+ev7RHk/xV9fWPUfSvHPHwz488Kcf8vTf+gGvY7Lqfwr56/tEeT/ABV9fWPUfSvHPHwz488Kcf8AL03/AKAa9jsup/Cvnr+0R5P8VfX1j1H0rxzx8M+PPCnH/L03/oBr2Oy6n8K+ev7RHk/xV9fWPUfSvHPHwz488Kcf8vTf+gGvY7Lqfwr56/tEeT/FX19Y9R9K8c8fDPjzwpx/y9N/6Aa9jsup/CvnD7f/AKJ9+v/2Q==";C(new File([new Blob],"mock-documento.jpg",{type:"image/jpeg"})),b(i),g(65)}else{const i="data:image/jpeg;base64,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";s(new File([new Blob],"mock-selfie.jpg",{type:"image/jpeg"})),f(i),g(90)}B(!1);return}l({title:"Error de cámara",description:"No se pudo acceder a la cámara de su dispositivo. Intente con otro navegador o verifique los permisos.",variant:"destructive"})}},Z=()=>{if(!N.current||!D.current)return;const a=N.current,n=D.current;n.width=a.videoWidth,n.height=a.videoHeight;const i=n.getContext("2d");i&&(i.drawImage(a,0,0,n.width,n.height),n.toBlob(h=>{if(!h)return;const x=new File([h],`${W}-${Date.now()}.jpg`,{type:"image/jpeg"}),S=URL.createObjectURL(h);W==="documento"?(C(x),b(S),g(65)):(s(x),f(S),g(90)),j.current&&(j.current.getTracks().forEach(de=>de.stop()),j.current=null),B(!1)},"image/jpeg",.95))},le=async()=>{w(!0);try{await new Promise(a=>setTimeout(a,1500)),ie(!0),g(100),l({title:"Verificación completada",description:"Su identidad ha sido verificada correctamente"})}catch(a){console.error("Error al finalizar verificación:",a),X("No se pudo completar la verificación. Inténtelo de nuevo."),l({title:"Error",description:"No se pudo completar la verificación. Inténtelo de nuevo.",variant:"destructive"})}finally{w(!1)}},oe=[{label:"Inicio",href:"/"},{label:"Verificación de Identidad",href:"/verificacion-nfc"}];return e.jsx("div",{className:"min-h-screen bg-gray-100 p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsx(xe,{items:oe,backTo:"/",backLabel:"Volver al inicio",className:"mb-6"}),e.jsxs(ve,{className:"shadow-lg",children:[e.jsxs(je,{className:"bg-gradient-to-r from-[#2d219b]/10 to-[#2d219b]/5",children:[e.jsx(he,{className:"text-xl text-[#2d219b]",children:"Verificación de identidad"}),e.jsxs(Ae,{children:["Complete los pasos requeridos para verificar su identidad",r&&e.jsx("div",{className:"mt-2 bg-indigo-100 px-2 py-1 rounded text-center",children:e.jsxs("span",{className:"font-mono font-semibold text-indigo-800",children:["Código: ",r]})})]})]}),e.jsxs(Ne,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsx("span",{children:"Progreso"}),e.jsxs("span",{children:[Math.round(Q),"%"]})]}),e.jsx(ge,{value:Q,className:"h-2"})]}),M?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ee,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-green-700 mb-2",children:"¡Verificación exitosa!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Su identidad ha sido verificada correctamente."}),te&&e.jsx("p",{className:"text-sm text-gray-500",children:"Puede cerrar esta ventana y volver a la página principal."})]}):e.jsxs(pe,{value:A,onValueChange:y,className:"w-full",children:[e.jsxs(Ce,{className:"grid grid-cols-3 mb-6",children:[e.jsxs(I,{value:"nfc",disabled:u,children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"NFC"]}),e.jsxs(I,{value:"documento",disabled:!ae||u,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Documento"]}),e.jsxs(I,{value:"selfie",disabled:!H||u,children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Selfie"]})]}),e.jsxs(z,{value:"nfc",className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Lectura del chip NFC"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Acerque su cédula o documento de identidad al dispositivo para leer el chip NFC."})]}),ne===!1&&e.jsxs(q,{variant:"destructive",className:"mb-4",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx(_,{children:"Este dispositivo o navegador no es compatible con NFC. Intente con un dispositivo Android compatible."})]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"mb-4",children:e.jsx(He,{onSuccess:G,onError:a=>{X(`Error en la lectura NFC: ${a}`),l({title:"Error NFC",description:a,variant:"destructive"})},demoMode:p})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"¿Problemas con NFC?"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Valide su identidad utilizando ClaveÚnica o RUT + Clave"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"flex items-center justify-center",onClick:()=>{l({title:"Clave Única",description:"Accediendo al sistema de verificación con ClaveÚnica..."}),w(!0),setTimeout(()=>{G({documentType:"CI-CHL",documentNumber:"16.782.453-K",names:"MARÍA ALEJANDRA",surnames:"GONZÁLEZ FUENTES",nationality:"CHL",birthDate:"1988-04-22",gender:"F",success:!0}),w(!1)},2e3)},children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Validar con ClaveÚnica"]}),e.jsxs(d,{variant:"ghost",size:"sm",className:"flex items-center justify-center",onClick:()=>{l({title:"Verificación Alternativa",description:"Accediendo al sistema de verificación con RUT + Clave..."}),w(!0),setTimeout(()=>{G({documentType:"CI-CHL",documentNumber:"16.782.453-K",names:"MARÍA ALEJANDRA",surnames:"GONZÁLEZ FUENTES",nationality:"CHL",birthDate:"1988-04-22",gender:"F",success:!0}),w(!1)},2e3)},children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Validar con RUT + Clave"]})]})]})})]})]}),e.jsxs(z,{value:"documento",className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Fotografía del documento"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Tome una fotografía clara de su documento de identidad."})]}),H&&L?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("img",{src:L,alt:"Vista previa del documento",className:"w-full h-auto object-contain"})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(d,{variant:"outline",onClick:()=>{C(null),b(null),E("documento")},disabled:u,children:"Tomar otra"}),e.jsx(d,{onClick:()=>{y("selfie"),setTimeout(()=>{E("selfie")},500)},disabled:u,children:"Continuar"})]})]}):O?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative border rounded-lg overflow-hidden bg-black",children:[e.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,className:"w-full h-auto"}),e.jsx("canvas",{ref:D,className:"hidden"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsx("div",{className:"h-full w-full flex items-center justify-center",children:e.jsx("div",{className:"border-2 border-white border-dashed rounded-lg w-5/6 h-4/6 opacity-60"})})})]}),e.jsxs(d,{className:"w-full",onClick:Z,disabled:u,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Capturar documento"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-8 bg-gray-50 text-center",children:[e.jsx(U,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Use la cámara para tomar una foto de su documento de identidad."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(d,{onClick:()=>E("documento"),disabled:u,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Activar cámara"]})}),e.jsx("input",{type:"file",accept:"image/*",ref:V,className:"hidden",onChange:a=>{const n=a.target.files;if(n&&n.length>0){const i=n[0];C(i);const h=new FileReader;h.onload=x=>{x.target&&typeof x.target.result=="string"&&b(x.target.result)},h.readAsDataURL(i),g(65)}}}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"text-blue-600 text-sm",onClick:()=>{var a;return(a=V.current)==null?void 0:a.click()},children:"O seleccione una imagen desde su dispositivo"})})]})]}),e.jsxs(z,{value:"selfie",className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Selfie para verificación"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Tome una foto clara de su rostro para confirmar su identidad."})]}),K&&m?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("img",{src:m,alt:"Vista previa del selfie",className:"w-full h-auto object-contain"})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(d,{variant:"outline",onClick:()=>{s(null),f(null),E("selfie")},disabled:u,children:"Tomar otra"}),e.jsx(d,{onClick:le,disabled:u,children:u?e.jsx(e.Fragment,{children:"Procesando..."}):e.jsx(e.Fragment,{children:"Finalizar verificación"})})]})]}):O?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative border rounded-lg overflow-hidden bg-black",children:[e.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,className:"w-full h-auto"}),e.jsx("canvas",{ref:D,className:"hidden"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsx("div",{className:"h-full w-full flex items-center justify-center",children:e.jsx("div",{className:"border-2 border-white border-dashed rounded-lg w-4/6 h-4/6 opacity-60"})})})]}),e.jsxs(d,{className:"w-full",onClick:Z,disabled:u,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Capturar selfie"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-8 bg-gray-50 text-center",children:[e.jsx(J,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Use la cámara frontal para tomar una foto de su rostro."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(d,{onClick:()=>E("selfie"),disabled:u,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Activar cámara"]})}),e.jsx("input",{type:"file",accept:"image/*",ref:V,className:"hidden",onChange:a=>{const n=a.target.files;if(n&&n.length>0){const i=n[0];s(i);const h=new FileReader;h.onload=x=>{x.target&&typeof x.target.result=="string"&&f(x.target.result)},h.readAsDataURL(i),g(90)}}}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"text-blue-600 text-sm",onClick:()=>{var a;return(a=V.current)==null?void 0:a.click()},children:"O seleccione una imagen desde su dispositivo"})})]})]})]}),Y&&e.jsxs(q,{variant:"destructive",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx(_,{children:Y})]})]}),e.jsxs(Pe,{className:"px-6 py-4 border-t flex flex-col space-y-4",children:[e.jsxs("div",{className:"w-full border-b border-gray-100 pb-4",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-[#2d219b]",children:"Acceso Móvil"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Escanee este código QR para abrir en un dispositivo móvil"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"border rounded-lg p-3 bg-white",children:e.jsx(ye,{value:`${window.location.origin}/verificacion-nfc${o.includes("?")?o.substring(o.indexOf("?")):"?demo=true"}`,size:150,bgColor:"#ffffff",fgColor:"#2d219b",level:"M",includeMargin:!1})})}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsxs("a",{href:`${window.location.origin}/verificacion-nfc${o.includes("?")?o.substring(o.indexOf("?")):"?demo=true"}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs flex items-center text-[#2d219b] font-medium",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Abrir en nueva ventana"]})})]}),e.jsx("div",{className:"w-full flex justify-end",children:!M&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>v("/"),children:"Cancelar verificación"})})]})]})]})})};export{Ve as default};
