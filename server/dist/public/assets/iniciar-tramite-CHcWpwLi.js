import{aG as C,u as N,bu as y,r as a,j as e,a as S,b as T,d as w,f as I,e as D,s as Q,O as E,P,Q as R,R as q,V as i,bt as G,x as F,B as o}from"./index-Bdt7aQY8.js";function V(){const{toast:s}=C(),[,h]=N();y();const[c,l]=a.useState(!1),[r,g]=a.useState(""),[t,d]=a.useState(!1),[m,u]=a.useState(""),[j,x]=a.useState(""),p=async v=>{if(v.preventDefault(),!r){s({title:"Error",description:"Por favor selecciona un tipo de documento",variant:"destructive"});return}l(!0);try{const n=Math.random().toString(36).substring(2,15);await new Promise(b=>setTimeout(b,1e3));const f=window.location.origin+"/verificar/"+n;u(f),x(n),d(!0),s({title:"Éxito",description:"Trámite iniciado correctamente"})}catch{s({title:"Error",description:"Ha ocurrido un error al iniciar el trámite",variant:"destructive"})}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs(S,{className:"w-full max-w-md",children:[e.jsxs(T,{className:"bg-indigo-900 text-white rounded-t-lg",children:[e.jsx(w,{className:"text-xl",children:"Iniciar Trámite"}),e.jsx(I,{className:"text-gray-200",children:"Seleccione el tipo de documento para generar un código QR"})]}),e.jsx(D,{className:"pt-6",children:t?e.jsxs("div",{className:"flex flex-col items-center space-y-4 py-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Escanea este código QR con tu móvil:"}),e.jsx("div",{className:"border-2 border-indigo-900 p-4 rounded-lg bg-white",children:e.jsx(G,{value:m,size:200,level:"H",includeMargin:!0})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ID del trámite:"}),e.jsx("p",{className:"font-mono text-indigo-900 font-bold",children:j})]}),e.jsx("p",{className:"text-sm text-gray-600 text-center max-w-xs",children:"Una vez escaneado, se iniciará el proceso de verificación en tu dispositivo móvil."})]}):e.jsx("form",{onSubmit:p,className:"space-y-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"document-type",children:"Tipo de Documento:"}),e.jsxs(E,{value:r,onValueChange:g,children:[e.jsx(P,{id:"document-type",className:"w-full",children:e.jsx(R,{placeholder:"Seleccione un tipo de documento"})}),e.jsxs(q,{children:[e.jsx(i,{value:"compraventa",children:"Contrato de Compraventa"}),e.jsx(i,{value:"trabajo",children:"Contrato de Trabajo"}),e.jsx(i,{value:"poder",children:"Poder Bancario"}),e.jsx(i,{value:"mandato",children:"Mandato General"}),e.jsx(i,{value:"finiquito",children:"Finiquito Laboral"})]})]})]})})}),e.jsxs(F,{className:"flex justify-between",children:[e.jsx(o,{variant:"outline",onClick:()=>{t?(d(!1),u(""),x("")):h("/")},children:t?"Iniciar Otro Trámite":"Cancelar"}),!t&&e.jsx(o,{onClick:p,disabled:c||!r,className:"bg-indigo-900 hover:bg-indigo-800",children:c?"Procesando...":"Iniciar Trámite"}),t&&e.jsx(o,{onClick:()=>{s({title:"Compartido",description:"Enlace de verificación copiado al portapapeles"}),navigator.clipboard.writeText(m)},className:"bg-green-600 hover:bg-green-700",children:"Compartir QR"})]})]})})}export{V as default};
